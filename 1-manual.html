<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Manual</title>
    <style>
      /* Critical CSS to prevent sidebar flash */
      body.sidebar-collapsed .sidebar {
        transform: translateX(-100%);
      }

      body.sidebar-collapsed .sidebar-toggle {
        left: 0;
      }

      body.sidebar-collapsed .sidebar-toggle svg {
        transform: rotate(180deg);
      }
    </style>
    <script>
      // Apply sidebar state immediately before any DOM rendering
      (function() {
        if (localStorage.getItem("sidebar-collapsed") === "true") {
          document.documentElement.classList.add("sidebar-collapsed");
          document.body.classList.add("sidebar-collapsed");
        }
      })();
    </script>
    <link rel="stylesheet" href="assets/style.css" />
    
    <script defer src="assets/search.js"></script>
    
  </head>
  <body>
    <div class="container">
      <header>
        <div class="header-left">
          <h1 class="site-title"><a href="index.html">nvf</a></h1>
        </div>
        <nav class="header-nav">
          <ul>
            <li ><a href="options.html">Options</a></li>
            
            <li><a href="search.html">Search</a></li>
            
          </ul>
        </nav>
        
        <div class="search-container">
          <input type="text" id="search-input" placeholder="Search..." />
          <div id="search-results" class="search-results"></div>
        </div>
        
      </header>

      <div class="layout">
        <div class="sidebar-toggle" aria-label="Toggle sidebar">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            width="24"
            height="24"
          >
            <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path>
          </svg>
        </div>
        <nav class="sidebar">
          <div class="docs-nav">
            <h2>Documents</h2>
            <ul>
              <li><a href="3-hacking.html">Hacking nvf</a></li>
<li><a href="2-quirks.html">Known Issues and Quirks</a></li>
<li><a href="4-release-notes.html">Release Notes</a></li>
<li><a href="1-manual.html">Manual</a></li>
<li><a href="search.html">Search</a></li>

            </ul>
          </div>

          <div class="toc">
            <h2>Contents</h2>
            <ul class="toc-list">
              <li><a href="#manual">Manual</a>
<ul><li><a href="#ch-preface">Preface</a>
<ul><li><a href="#sec-what-is-it">What is nvf</a>
<li><a href="#sec-bugs-suggestions">Bugs & Suggestions</a>
</ul><li><a href="#ch-try-it-out">Try it out</a>
<ul><li><a href="#sec-using-prebuilt-configs">Using Prebuilt Configs</a>
</ul><li><a href="#ch-installation">Installing nvf</a>
<ul><li><a href="#ch-standalone-installation">Standalone Installation</a>
</ul></ul><li><a href="#make-sure-that-inputs-is-properly-propagated-it-will-be-missing-otherwise">Make sure that 'inputs' is properly propagated! It will be missing otherwise</a>
<li><a href="#and-the-resulting-errors-might-be-too-obscure">and the resulting errors might be too obscure.</a>
</li>
            </ul>
          </div>
        </nav>

        <main class="content">
          <h1>Manual</h1>
<h2 id="ch-preface">Preface</h2>
<h3 id="sec-what-is-it">What is nvf</h3>
<p>nvf is a highly modular, configurable, extensible and easy to use Neovim
configuration in Nix. Designed for flexibility and ease of use, nvf allows you
to easily configure your fully featured Neovim instance with a few lines of Nix.</p>
<h3 id="sec-bugs-suggestions">Bugs &amp; Suggestions</h3>
<p>If you notice any issues with nvf, or this documentation, then please consider
reporting them over at the <a href="https://github.com/notashelf/nvf/issues">issue tracker</a>. Issues tab, in addition to the
<a href="https://github.com/notashelf/nvf/discussions">discussions tab</a> is a good place as any to request new features.</p>
<p>You may also consider submitting bugfixes, feature additions and upstreamed
changes that you think are critical over at the <a href="https://github.com/notashelf/nvf/pulls">pull requests tab</a>.</p>
<h2 id="ch-try-it-out">Try it out</h2>
<p>Thanks to the portability of Nix, you can try out nvf without actually
installing it to your machine. Below are the commands you may run to try out
different configurations provided by this flake. As of v0.5, two specialized
configurations are provided:</p>
<ul>
<li><strong>Nix</strong> - Nix language server + simple utility plugins</li>
<li><strong>Maximal</strong> - Variable language servers + utility and decorative plugins</li>
</ul>
<p>You may try out any of the provided configurations using the <code>nix run</code> command
on a system where Nix is installed.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">$ cachix use nvf                   </span><span style="font-style:italic;color:#969896;"># Optional: it&#39;ll save you CPU resources and time
</span><span style="color:#323232;">$ nix run github:notashelf/nvf#nix </span><span style="font-style:italic;color:#969896;"># will run the default minimal configuration
</span></pre>
<p>Do keep in mind that this is <strong>susceptible to garbage collection</strong> meaning it
will be removed from your Nix store once you garbage collect.</p>
<h3 id="sec-using-prebuilt-configs">Using Prebuilt Configs</h3>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">$ nix run github:notashelf/nvf#nix
</span><span style="color:#323232;">$ nix run github:notashelf/nvf#maximal
</span></pre>
<h4 id="sec-available-configs">Available Configurations</h4>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The below configurations are provided for demonstration purposes, and are
<strong>not</strong> designed to be installed as is. You may</p>
</div>
<h5 id="sec-configs-nix">Nix</h5>
<p><code>Nix</code> configuration by default provides LSP/diagnostic support for Nix alongside
a set of visual and functional plugins. By running <code>nix run .#</code>, which is the
default package, you will build Neovim with this config.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">$ nix run github:notashelf/nvf#nix test.nix
</span></pre>
<p>This command will start Neovim with some opinionated plugin configurations, and
is designed specifically for Nix. the <code>nix</code> configuration lets you see how a
fully configured Neovim setup <em>might</em> look like without downloading too many
packages or shell utilities.</p>
<h5 id="sec-configs-maximal">Maximal</h5>
<p><code>Maximal</code> is the ultimate configuration that will enable support for more
commonly used language as well as additional complementary plugins. Keep in
mind, however, that this will pull a lot of dependencies.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">$ nix run github:notashelf/nvf#maximal</span><span style="font-weight:bold;color:#a71d5d;"> --</span><span style="color:#323232;"> test.nix
</span></pre>
<p>It uses the same configuration template with the <a href="#sec-configs-nix">Nix</a>
configuration, but supports many more languages, and enables more utility,
companion or fun plugins.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Running the maximal config will download <em>a lot</em> of packages as it is
downloading language servers, formatters, and more.</p>
</div>
<h2 id="ch-installation">Installing nvf</h2>
<p>There are multiple ways of installing nvf on your system. You may either choose
the standalone installation method, which does not depend on a module system and
may be done on any system that has the Nix package manager or the appropriate
modules for NixOS and home-manager as described in the
<a href="#ch-module-installation">module installation section</a>.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">installation/custom-configuration.md
</span><span style="color:#323232;">installation/modules.md
</span></pre>
<h3 id="ch-standalone-installation">Standalone Installation</h3>
<p>It is possible to install nvf without depending on NixOS or Home-Manager as the
parent module system, using the <code>neovimConfiguration</code> function exposed in the
extended library. This function will take <code>modules</code> and <code>extraSpecialArgs</code> as
arguments, and return the following schema as a result.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="color:#795da3;">options </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;The options that were available to configure&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">  </span><span style="color:#795da3;">config </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;The outputted configuration&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">  </span><span style="color:#795da3;">pkgs </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;The package set used to evaluate the module&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">  </span><span style="color:#795da3;">neovim </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;The built neovim package&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">}
</span></pre>
<p>An example flake that exposes your custom Neovim configuration might look like</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="color:#795da3;">inputs </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="color:#795da3;">nixpkgs</span><span style="color:#323232;">.</span><span style="color:#795da3;">url </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;github:NixOS/nixpkgs/nixos-unstable&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    </span><span style="color:#795da3;">nvf</span><span style="color:#323232;">.</span><span style="color:#795da3;">url </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;github:notashelf/nvf&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">
</span><span style="color:#323232;">  </span><span style="color:#795da3;">outputs </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{nixpkgs</span><span style="font-weight:bold;color:#a71d5d;">, ...</span><span style="color:#323232;">} @ inputs: {
</span><span style="color:#323232;">    </span><span style="color:#795da3;">packages</span><span style="color:#323232;">.</span><span style="color:#795da3;">x86_64-linux </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># Set the default package to the wrapped instance of Neovim.
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># This will allow running your Neovim configuration with
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># `nix run` and in addition, sharing your configuration with
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># other users in case your repository is public.
</span><span style="color:#323232;">      </span><span style="color:#795da3;">default </span><span style="font-weight:bold;color:#a71d5d;">=
</span><span style="color:#323232;">        (inputs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">nvf</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">neovimConfiguration {
</span><span style="color:#323232;">          </span><span style="color:#795da3;">pkgs </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">nixpkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">legacyPackages</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">x86_64-linux;
</span><span style="color:#323232;">          </span><span style="color:#795da3;">modules </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[
</span><span style="color:#323232;">            {
</span><span style="color:#323232;">              </span><span style="color:#795da3;">config</span><span style="color:#323232;">.</span><span style="color:#795da3;">vim </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">                </span><span style="font-style:italic;color:#969896;"># Enable custom theming options
</span><span style="color:#323232;">                </span><span style="color:#795da3;">theme</span><span style="color:#323232;">.</span><span style="color:#795da3;">enable </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">true</span><span style="color:#323232;">;
</span><span style="color:#323232;">
</span><span style="color:#323232;">                </span><span style="font-style:italic;color:#969896;"># Enable Treesitter
</span><span style="color:#323232;">                </span><span style="color:#795da3;">treesitter</span><span style="color:#323232;">.</span><span style="color:#795da3;">enable </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">true</span><span style="color:#323232;">;
</span><span style="color:#323232;">
</span><span style="color:#323232;">                </span><span style="font-style:italic;color:#969896;"># Other options will go here. Refer to the config
</span><span style="color:#323232;">                </span><span style="font-style:italic;color:#969896;"># reference in Appendix B of the nvf manual.
</span><span style="color:#323232;">                </span><span style="font-style:italic;color:#969896;"># ...
</span><span style="color:#323232;">              };
</span><span style="color:#323232;">            }
</span><span style="color:#323232;">          ];
</span><span style="color:#323232;">        })
</span><span style="color:#323232;">        </span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">neovim;
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">}
</span></pre>
<!-- TODO: mention the built-in flake template here when it is added -->
<p>The above setup will allow to set up nvf as a standalone flake, which you can
build independently from your system configuration while also possibly sharing
it with others. The next two chapters will detail specific usage of such a setup
for a package output in the context of NixOS or Home-Manager installation.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">standalone/nixos.md
</span><span style="color:#323232;">standalone/home-manager.md
</span></pre>
<h4 id="ch-standalone-nixos">Standalone Installation on NixOS</h4>
<p>Your built Neovim configuration can be exposed as a flake output to make it
easier to share across machines, repositories and so on. Or it can be added to
your system packages to make it available across your system.</p>
<p>The following is an example installation of <code>nvf</code> as a standalone package with
the default theme enabled. You may use other options inside <a href="options.html#option-config-vim" class="option-reference"><code>config.vim</code></a> in
<code>configModule</code>, but this example will not cover that extensively.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="color:#795da3;">inputs </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="color:#795da3;">nixpkgs</span><span style="color:#323232;">.</span><span style="color:#795da3;">url </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;github:NixOS/nixpkgs/nixos-unstable&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    </span><span style="color:#795da3;">home-manager</span><span style="color:#323232;">.</span><span style="color:#795da3;">url </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;github:nix-community/home-manager&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    </span><span style="color:#795da3;">nvf</span><span style="color:#323232;">.</span><span style="color:#795da3;">url </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;github:notashelf/nvf&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">
</span><span style="color:#323232;">  </span><span style="color:#795da3;">outputs </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    nixpkgs</span><span style="font-weight:bold;color:#a71d5d;">,
</span><span style="color:#323232;">    nvf</span><span style="font-weight:bold;color:#a71d5d;">,
</span><span style="color:#323232;">    self</span><span style="font-weight:bold;color:#a71d5d;">,
</span><span style="color:#323232;">    </span><span style="font-weight:bold;color:#a71d5d;">...
</span><span style="font-weight:bold;color:#a71d5d;">  </span><span style="color:#323232;">}: {
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># This will make the package available as a flake output under &#39;packages&#39;
</span><span style="color:#323232;">    </span><span style="color:#795da3;">packages</span><span style="color:#323232;">.</span><span style="color:#795da3;">x86_64-linux</span><span style="color:#323232;">.</span><span style="color:#795da3;">my-neovim </span><span style="font-weight:bold;color:#a71d5d;">=
</span><span style="color:#323232;">      (nvf</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">neovimConfiguration {
</span><span style="color:#323232;">        </span><span style="color:#795da3;">pkgs </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">nixpkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">legacyPackages</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">x86_64-linux;
</span><span style="color:#323232;">        </span><span style="color:#795da3;">modules </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[
</span><span style="color:#323232;">          </span><span style="font-style:italic;color:#969896;"># Or move this to a separate file and add it&#39;s path here instead
</span><span style="color:#323232;">          </span><span style="font-style:italic;color:#969896;"># IE: ./nvf_module.nix
</span><span style="color:#323232;">          (
</span><span style="color:#323232;">            {pkgs</span><span style="font-weight:bold;color:#a71d5d;">, ...</span><span style="color:#323232;">}: {
</span><span style="color:#323232;">              </span><span style="font-style:italic;color:#969896;"># Add any custom options (and do feel free to upstream them!)
</span><span style="color:#323232;">              </span><span style="font-style:italic;color:#969896;"># options = { ... };
</span><span style="color:#323232;">              </span><span style="color:#795da3;">config</span><span style="color:#323232;">.</span><span style="color:#795da3;">vim </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">                </span><span style="color:#795da3;">theme</span><span style="color:#323232;">.</span><span style="color:#795da3;">enable </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">true</span><span style="color:#323232;">;
</span><span style="color:#323232;">                </span><span style="font-style:italic;color:#969896;"># and more options as you see fit...
</span><span style="color:#323232;">              };
</span><span style="color:#323232;">            }
</span><span style="color:#323232;">          )
</span><span style="color:#323232;">        ];
</span><span style="color:#323232;">      })
</span><span style="color:#323232;">      </span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">neovim;
</span><span style="color:#323232;">
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># Example nixosConfiguration using the configured Neovim package
</span><span style="color:#323232;">    </span><span style="color:#795da3;">nixosConfigurations </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">      </span><span style="color:#795da3;">yourHostName </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">nixpkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">nixosSystem {
</span><span style="color:#323232;">        </span><span style="font-style:italic;color:#969896;"># ...
</span><span style="color:#323232;">        </span><span style="color:#795da3;">modules </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[
</span><span style="color:#323232;">          </span><span style="font-style:italic;color:#969896;"># This will make wrapped neovim available in your system packages
</span><span style="color:#323232;">          </span><span style="font-style:italic;color:#969896;"># Can also move this to another config file if you pass inputs/self around with specialArgs
</span><span style="color:#323232;">          ({pkgs</span><span style="font-weight:bold;color:#a71d5d;">, ...</span><span style="color:#323232;">}: {
</span><span style="color:#323232;">            </span><span style="color:#795da3;">environment</span><span style="color:#323232;">.</span><span style="color:#795da3;">systemPackages </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[self</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">packages</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">${pkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">stdenv</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">system}</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">neovim];
</span><span style="color:#323232;">          })
</span><span style="color:#323232;">        ];
</span><span style="color:#323232;">        </span><span style="font-style:italic;color:#969896;"># ...
</span><span style="color:#323232;">      };
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">}</span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">```</span><span style="color:#323232;">
</span><span style="color:#323232;">
</span><span style="font-style:italic;color:#969896;">#### Standalone Installation on Home-Manager {#ch-standalone-hm}
</span><span style="color:#323232;">
</span><span style="color:#323232;">Your built Neovim configuration can be exposed as a flake output to make it
</span><span style="color:#323232;">easier to share across machines</span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">,</span><span style="color:#323232;"> repositories </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">and</span><span style="color:#323232;"> </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">so</span><span style="color:#323232;"> </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">on</span><span style="color:#323232;">. </span><span style="color:#795da3;">Or it can be added to
</span><span style="color:#795da3;">your system packages to make it available across your system</span><span style="color:#323232;">.
</span><span style="color:#323232;">
</span><span style="color:#795da3;">The following is an example installation of </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">`</span><span style="color:#795da3;">nvf</span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">`</span><span style="color:#323232;"> </span><span style="color:#795da3;">as a standalone package </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">with</span><span style="color:#323232;">
</span><span style="color:#795da3;">the default theme enabled</span><span style="color:#323232;">. </span><span style="color:#795da3;">You may use other options inside </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">`</span><span style="color:#795da3;">config</span><span style="color:#323232;">.</span><span style="color:#795da3;">vim</span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">`</span><span style="color:#323232;"> </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">in</span><span style="color:#323232;">
</span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">`</span><span style="color:#795da3;">configModule</span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">`,</span><span style="color:#323232;"> </span><span style="color:#795da3;">but this example will not cover that extensively</span><span style="color:#323232;">.
</span><span style="color:#323232;">
</span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">```</span><span style="color:#795da3;">nix
</span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">{</span><span style="color:#323232;">
</span><span style="color:#323232;">  </span><span style="color:#795da3;">inputs </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="color:#795da3;">nixpkgs</span><span style="color:#323232;">.</span><span style="color:#795da3;">url </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;github:NixOS/nixpkgs/nixos-unstable&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    </span><span style="color:#795da3;">home-manager</span><span style="color:#323232;">.</span><span style="color:#795da3;">url </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;github:nix-community/home-manager&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    </span><span style="color:#795da3;">nvf</span><span style="color:#323232;">.</span><span style="color:#795da3;">url </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;github:notashelf/nvf&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">
</span><span style="color:#323232;">  </span><span style="color:#795da3;">outputs </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{nixpkgs</span><span style="font-weight:bold;color:#a71d5d;">, </span><span style="color:#323232;">home-manager</span><span style="font-weight:bold;color:#a71d5d;">, </span><span style="color:#323232;">nvf</span><span style="font-weight:bold;color:#a71d5d;">, ...</span><span style="color:#323232;">}: </span><span style="font-weight:bold;color:#a71d5d;">let
</span><span style="color:#323232;">    </span><span style="color:#795da3;">system </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;x86_64-linux&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    </span><span style="color:#795da3;">pkgs </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">nixpkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">legacyPackages</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">${system};
</span><span style="color:#323232;">    </span><span style="color:#795da3;">configModule </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># Add any custom options (and do feel free to upstream them!)
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># options = { ... };
</span><span style="color:#323232;">
</span><span style="color:#323232;">      </span><span style="color:#795da3;">config</span><span style="color:#323232;">.</span><span style="color:#795da3;">vim </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">        </span><span style="color:#795da3;">theme</span><span style="color:#323232;">.</span><span style="color:#795da3;">enable </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">true</span><span style="color:#323232;">;
</span><span style="color:#323232;">        </span><span style="font-style:italic;color:#969896;"># and more options as you see fit...
</span><span style="color:#323232;">      };
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">
</span><span style="color:#323232;">    </span><span style="color:#795da3;">customNeovim </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">nvf</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">neovimConfiguration {
</span><span style="color:#323232;">      </span><span style="font-weight:bold;color:#a71d5d;">inherit </span><span style="color:#795da3;">pkgs</span><span style="color:#323232;">;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">modules </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[configModule];
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">  </span><span style="font-weight:bold;color:#a71d5d;">in </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># This will make the package available as a flake output under &#39;packages&#39;
</span><span style="color:#323232;">    </span><span style="color:#795da3;">packages</span><span style="color:#323232;">.${system}.</span><span style="color:#795da3;">my-neovim </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">customNeovim</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">neovim;
</span><span style="color:#323232;">
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># Example Home-Manager configuration using the configured Neovim package
</span><span style="color:#323232;">    </span><span style="color:#795da3;">homeConfigurations </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">      </span><span style="color:#183691;">&quot;your-username@your-hostname&quot; </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">home-manager</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">homeManagerConfiguration {
</span><span style="color:#323232;">        </span><span style="font-style:italic;color:#969896;"># ...
</span><span style="color:#323232;">        </span><span style="color:#795da3;">modules </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[
</span><span style="color:#323232;">          </span><span style="font-style:italic;color:#969896;"># This will make Neovim available to users using the Home-Manager
</span><span style="color:#323232;">          </span><span style="font-style:italic;color:#969896;"># configuration. To make the package available to all users, prefer
</span><span style="color:#323232;">          </span><span style="font-style:italic;color:#969896;"># environment.systemPackages in your NixOS configuration.
</span><span style="color:#323232;">          {</span><span style="color:#795da3;">home</span><span style="color:#323232;">.</span><span style="color:#795da3;">packages </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[customNeovim</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">neovim];}
</span><span style="color:#323232;">        ];
</span><span style="color:#323232;">        </span><span style="font-style:italic;color:#969896;"># ...
</span><span style="color:#323232;">      };
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">}
</span></pre>
<h3 id="ch-module-installation">Module Installation</h3>
<p>The below chapters will describe installing nvf as NixOS and Home-Manager
modules. Note that those methods are mutually exclusive, and will likely cause
path collisions if used simultaneously.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">modules/nixos.md
</span><span style="color:#323232;">modules/home-manager.md
</span></pre>
<h4 id="ch-nixos-module">NixOS Module</h4>
<p>The NixOS module allows us to customize the different <code>vim</code> options from inside
the NixOS configuration without having to call for the wrapper yourself. It is
the recommended way to use <strong>nvf</strong> alongside the home-manager module depending
on your needs.</p>
<p>To use it, we first add the input flake.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="color:#795da3;">inputs </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># Optional, if you intend to follow nvf&#39;s obsidian-nvim input
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># you must also add it as a flake input.
</span><span style="color:#323232;">    </span><span style="color:#795da3;">obsidian-nvim</span><span style="color:#323232;">.</span><span style="color:#795da3;">url </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;github:epwalsh/obsidian.nvim&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># Required, nvf works best and only directly supports flakes
</span><span style="color:#323232;">    </span><span style="color:#795da3;">nvf </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">      </span><span style="color:#795da3;">url </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;github:notashelf/nvf&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># You can override the input nixpkgs to follow your system&#39;s
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># instance of nixpkgs. This is safe to do as nvf does not depend
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># on a binary cache.
</span><span style="color:#323232;">      </span><span style="color:#795da3;">inputs</span><span style="color:#323232;">.</span><span style="color:#795da3;">nixpkgs</span><span style="color:#323232;">.</span><span style="color:#795da3;">follows </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;nixpkgs&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># Optionally, you can also override individual plugins
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># for example:
</span><span style="color:#323232;">      </span><span style="color:#795da3;">inputs</span><span style="color:#323232;">.</span><span style="color:#795da3;">obsidian-nvim</span><span style="color:#323232;">.</span><span style="color:#795da3;">follows </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;obsidian-nvim&quot;</span><span style="color:#323232;">; </span><span style="font-style:italic;color:#969896;"># &lt;- this will use the obsidian-nvim from your inputs
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">}
</span></pre>
<p>Followed by importing the NixOS module somewhere in your configuration.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># assuming nvf is in your inputs and inputs is in the argset
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># see example below
</span><span style="color:#323232;">  </span><span style="color:#795da3;">imports </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[ inputs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">nvf</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">nixosModules</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">default ];
</span><span style="color:#323232;">}
</span></pre>
<h5 id="sec-example-installation-nixos">Example Installation</h5>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="color:#795da3;">inputs </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="color:#795da3;">nixpkgs</span><span style="color:#323232;">.</span><span style="color:#795da3;">url </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;github:NixOS/nixpkgs/nixos-unstable&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    </span><span style="color:#795da3;">nvf</span><span style="color:#323232;">.</span><span style="color:#795da3;">url </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;github:notashelf/nvf&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">
</span><span style="color:#323232;">  </span><span style="color:#795da3;">outputs </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{ nixpkgs</span><span style="font-weight:bold;color:#a71d5d;">, </span><span style="color:#323232;">nvf</span><span style="font-weight:bold;color:#a71d5d;">, ... </span><span style="color:#323232;">}: {
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># ↓ this is your host output in the flake schema
</span><span style="color:#323232;">    </span><span style="color:#795da3;">nixosConfigurations</span><span style="color:#323232;">.</span><span style="color:#183691;">&quot;your-hostname&quot; </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">nixpkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">nixosSystem {
</span><span style="color:#323232;">      </span><span style="color:#795da3;">modules </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[
</span><span style="color:#323232;">        nvf</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">nixosModules</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">default </span><span style="font-style:italic;color:#969896;"># &lt;- this imports the NixOS module that provides the options
</span><span style="color:#323232;">        </span><span style="color:#183691;">./configuration.nix </span><span style="font-style:italic;color:#969896;"># &lt;- your host entrypoint, `programs.nvf.*` may be defined here
</span><span style="color:#323232;">      ];
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">}
</span></pre>
<p>Once the module is properly imported by your host, you will be able to use the
<a href="options.html#option-programs-nvf" class="option-reference"><code>programs.nvf</code></a> module option anywhere in your configuration in order to
configure <strong>nvf</strong>.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">  programs.nvf = {
</span><span style="color:#323232;">    enable = true;
</span><span style="color:#323232;">    # your settings need to go into the settings attribute set
</span><span style="color:#323232;">    # most settings are documented in the appendix
</span><span style="color:#323232;">    settings = {
</span><span style="color:#323232;">      vim.viAlias = false;
</span><span style="color:#323232;">      vim.vimAlias = true;
</span><span style="color:#323232;">      vim.lsp = {
</span><span style="color:#323232;">        enable = true;
</span><span style="color:#323232;">      };
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">}
</span></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>nvf exposes a lot of options, most of which are not referenced in the
installation sections of the manual. You may find all available options in the
<a href="https://lunarnovaa.github.io/nvf/options">appendix</a></p>
</div>
<h4 id="ch-hm-module">Home-Manager Module</h4>
<p>The home-manager module allows us to customize the different <code>vim</code> options from
inside the home-manager configuration without having to call for the wrapper
yourself. It is the recommended way to use <strong>nvf</strong> alongside the NixOS module
depending on your needs.</p>
<p>To use it, we first add the input flake.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="color:#795da3;">inputs </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># Optional, if you intend to follow nvf&#39;s obsidian-nvim input
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># you must also add it as a flake input.
</span><span style="color:#323232;">    </span><span style="color:#795da3;">obsidian-nvim</span><span style="color:#323232;">.</span><span style="color:#795da3;">url </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;github:epwalsh/obsidian.nvim&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># Required, nvf works best and only directly supports flakes
</span><span style="color:#323232;">    </span><span style="color:#795da3;">nvf </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">      </span><span style="color:#795da3;">url </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;github:notashelf/nvf&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># You can override the input nixpkgs to follow your system&#39;s
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># instance of nixpkgs. This is safe to do as nvf does not depend
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># on a binary cache.
</span><span style="color:#323232;">      </span><span style="color:#795da3;">inputs</span><span style="color:#323232;">.</span><span style="color:#795da3;">nixpkgs</span><span style="color:#323232;">.</span><span style="color:#795da3;">follows </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;nixpkgs&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># Optionally, you can also override individual plugins
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># for example:
</span><span style="color:#323232;">      </span><span style="color:#795da3;">inputs</span><span style="color:#323232;">.</span><span style="color:#795da3;">obsidian-nvim</span><span style="color:#323232;">.</span><span style="color:#795da3;">follows </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;obsidian-nvim&quot;</span><span style="color:#323232;">; </span><span style="font-style:italic;color:#969896;"># &lt;- this will use the obsidian-nvim from your inputs
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">}
</span></pre>
<p>Followed by importing the home-manager module somewhere in your configuration.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># Assuming &quot;nvf&quot; is in your inputs and inputs is in the argument set.
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># See example installation below
</span><span style="color:#323232;">  </span><span style="color:#795da3;">imports </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[ inputs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">nvf</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">homeManagerModules</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">default ];
</span><span style="color:#323232;">}
</span></pre>
<h5 id="sec-example-installation-hm">Example Installation</h5>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="color:#795da3;">inputs </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="color:#795da3;">nixpkgs</span><span style="color:#323232;">.</span><span style="color:#795da3;">url </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;github:NixOS/nixpkgs/nixos-unstable&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    </span><span style="color:#795da3;">home-manager</span><span style="color:#323232;">.</span><span style="color:#795da3;">url </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;github:nix-community/home-manager&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    </span><span style="color:#795da3;">nvf</span><span style="color:#323232;">.</span><span style="color:#795da3;">url </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;github:notashelf/nvf&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">
</span><span style="color:#323232;">  </span><span style="color:#795da3;">outputs </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{ nixpkgs</span><span style="font-weight:bold;color:#a71d5d;">, </span><span style="color:#323232;">home-manager</span><span style="font-weight:bold;color:#a71d5d;">, </span><span style="color:#323232;">nvf</span><span style="font-weight:bold;color:#a71d5d;">, ... </span><span style="color:#323232;">}: {
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># ↓ this is your home output in the flake schema, expected by home-manager
</span><span style="color:#323232;">    </span><span style="color:#183691;">&quot;your-username@your-hostname&quot; </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">home-manager</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">homeManagerConfiguration {
</span><span style="color:#323232;">      </span><span style="color:#795da3;">pkgs </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">nixpkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">legacyPackages</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">x86_64-linux;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">modules </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[
</span><span style="color:#323232;">        nvf</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">homeManagerModules</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">default </span><span style="font-style:italic;color:#969896;"># &lt;- this imports the home-manager module that provides the options
</span><span style="color:#323232;">        </span><span style="color:#183691;">./home.nix </span><span style="font-style:italic;color:#969896;"># &lt;- your home entrypoint, `programs.nvf.*` may be defined here
</span><span style="color:#323232;">      ];
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">}
</span></pre>
<p>Once the module is properly imported by your host, you will be able to use the
<a href="options.html#option-programs-nvf" class="option-reference"><code>programs.nvf</code></a> module option anywhere in your configuration in order to
configure <strong>nvf</strong>.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">  programs.nvf = {
</span><span style="color:#323232;">    enable = true;
</span><span style="color:#323232;">    # your settings need to go into the settings attribute set
</span><span style="color:#323232;">    # most settings are documented in the appendix
</span><span style="color:#323232;">    settings = {
</span><span style="color:#323232;">      vim.viAlias = false;
</span><span style="color:#323232;">      vim.vimAlias = true;
</span><span style="color:#323232;">      vim.lsp = {
</span><span style="color:#323232;">        enable = true;
</span><span style="color:#323232;">      };
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">}
</span></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>nvf</strong> exposes a lot of options, most of which are not referenced in the
installation sections of the manual. You may find all available options in the
<a href="https://lunarnovaa.github.io/nvf/options">appendix</a></p>
</div>
<h2 id="ch-configuring">Configuring nvf</h2>
<p>nvf allows for <em>very</em> extensive configuration in Neovim through the Nix module
interface. The below chapters describe several of the options exposed in nvf for
your convenience. You might also be interested in the <a href="#ch-helpful-tips">helpful tips section</a> for
more advanced or unusual configuration options supported by nvf.</p>
<p>Note that this section does not cover module <em>options</em>. For an overview of all
module options provided by nvf, please visit the <a href="/options.html">appendix</a></p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">configuring/custom-package.md
</span><span style="color:#323232;">configuring/custom-plugins.md
</span><span style="color:#323232;">configuring/overriding-plugins.md
</span><span style="color:#323232;">configuring/languages.md
</span><span style="color:#323232;">configuring/dags.md
</span><span style="color:#323232;">configuring/dag-entries.md
</span><span style="color:#323232;">configuring/autocmds.md
</span></pre>
<h3 id="ch-custom-package">Custom Neovim Package</h3>
<p>As of v0.5, you may now specify the Neovim package that will be wrapped with
your configuration. This is done with the <a href="#opt-vim.package"></a> option.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{inputs</span><span style="font-weight:bold;color:#a71d5d;">, </span><span style="color:#323232;">pkgs</span><span style="font-weight:bold;color:#a71d5d;">, ...</span><span style="color:#323232;">}: {
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># using the neovim-nightly overlay
</span><span style="color:#323232;">  </span><span style="color:#795da3;">vim</span><span style="color:#323232;">.</span><span style="color:#795da3;">package </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">inputs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">neovim-overlay</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">packages</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">${pkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">stdenv</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">system}</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">neovim;
</span><span style="color:#323232;">}
</span></pre>
<p>The neovim-nightly-overlay always exposes an unwrapped package. If using a
different source, you are highly recommended to get an "unwrapped" version of
the neovim package, similar to <code>neovim-unwrapped</code> in nixpkgs.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{ pkgs</span><span style="font-weight:bold;color:#a71d5d;">, ...</span><span style="color:#323232;">}: {
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># using the neovim-nightly overlay
</span><span style="color:#323232;">  </span><span style="color:#795da3;">vim</span><span style="color:#323232;">.</span><span style="color:#795da3;">package </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">pkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">neovim-unwrapped;
</span><span style="color:#323232;">}
</span></pre>
<h3 id="ch-custom-plugins">Custom Plugins</h3>
<p><strong>nvf</strong> exposes a very wide variety of plugins by default, which are consumed by
module options. This is done for your convenience, and to bundle all necessary
dependencies into <strong>nvf</strong>'s runtime with full control of versioning, testing and
dependencies. In the case a plugin you need is <em>not</em> available, you may consider
making a pull request to add the package you're looking for, or you may add it
to your configuration locally. The below section describes how new plugins may
be added to the user's configuration.</p>
<h4 id="ch-adding-plugins">Adding Plugins</h4>
<p>Per <strong>nvf</strong>'s design choices, there are several ways of adding custom plugins to
your configuration as you need them. As we aim for extensive configuration, it
is possible to add custom plugins (from nixpkgs, pinning tools, flake inputs,
etc.) to your Neovim configuration before they are even implemented in <strong>nvf</strong>
as a module.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>To add a plugin to your runtime, you will need to add it to
<a href="#opt-vim.startPlugins"></a> list in your configuration. This is akin to cloning
a plugin to <code>~/.config/nvim</code>, but they are only ever placed in the Nix store
and never exposed to the outside world for purity and full isolation.</p>
</div>
<p>As you would configure a cloned plugin, you must configure the new plugins that
you've added to <code>startPlugins.</code> <strong>nvf</strong> provides multiple ways of configuring
any custom plugins that you might have added to your configuration.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">custom-plugins/configuring.md
</span><span style="color:#323232;">custom-plugins/lazy-method.md
</span><span style="color:#323232;">custom-plugins/non-lazy-method.md
</span><span style="color:#323232;">custom-plugins/legacy-method.md
</span></pre>
<h5 id="sec-configuring-plugins">Configuring</h5>
<p>Just making the plugin to your Neovim configuration available might not always
be enough., for example, if the plugin requires a setup table. In that case, you
can write custom Lua configuration using one of</p>
<ul>
<li><code>config.vim.lazy.plugins.*.setupOpts</code></li>
<li><code>config.vim.extraPlugins.*.setup</code></li>
<li><a href="options.html#option-config-vim-luaConfigRC" class="option-reference"><code>config.vim.luaConfigRC</code></a>.</li>
</ul>
<h6 id="ch-vim-lazy-plugins">Lazy Plugins</h6>
<p><code>config.vim.lazy.plugins.*.setupOpts</code> is useful for lazy-loading plugins, and
uses an extended version of <code>lz.n's</code> <code>PluginSpec</code> to expose a familiar
interface. <code>setupModule</code> and <code>setupOpt</code> can be used if the plugin uses a
<code>require('module').setup(...)</code> pattern. Otherwise, the <code>before</code> and <code>after</code>
hooks should do what you need.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="color:#795da3;">config</span><span style="color:#323232;">.</span><span style="color:#795da3;">vim</span><span style="color:#323232;">.</span><span style="color:#795da3;">lazy</span><span style="color:#323232;">.</span><span style="color:#795da3;">plugins </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="color:#795da3;">aerial</span><span style="color:#323232;">.</span><span style="color:#795da3;">nvim </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># ^^^^^^^^^ this name should match the package.pname or package.name
</span><span style="color:#323232;">      </span><span style="color:#795da3;">package </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">aerial-nvim;
</span><span style="color:#323232;">
</span><span style="color:#323232;">      </span><span style="color:#795da3;">setupModule </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;aerial&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">setupOpts </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{</span><span style="color:#795da3;">option_name </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">false</span><span style="color:#323232;">;};
</span><span style="color:#323232;">
</span><span style="color:#323232;">      </span><span style="color:#795da3;">after </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;print(&#39;aerial loaded&#39;)&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">}
</span></pre>
<h6 id="ch-vim-extra-plugins">Standard API</h6>
<p><a href="options.html#option-vim-extraPlugins" class="option-reference"><code>vim.extraPlugins</code></a> uses an attribute set, which maps DAG section names to a
custom type, which has the fields <code>package</code>, <code>after</code>, <code>setup</code>. They allow you to
set the package of the plugin, the sections its setup code should be after (note
that the <code>extraPlugins</code> option has its own DAG scope), and the its setup code
respectively. For example:</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{pkgs</span><span style="font-weight:bold;color:#a71d5d;">, ...</span><span style="color:#323232;">}: {
</span><span style="color:#323232;">  </span><span style="color:#795da3;">config</span><span style="color:#323232;">.</span><span style="color:#795da3;">vim</span><span style="color:#323232;">.</span><span style="color:#795da3;">extraPlugins </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="color:#795da3;">aerial </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">      </span><span style="color:#795da3;">package </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">pkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">vimPlugins</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">aerial-nvim;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">setup </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;require(&#39;aerial&#39;).setup {}&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">
</span><span style="color:#323232;">    </span><span style="color:#795da3;">harpoon </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">      </span><span style="color:#795da3;">package </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">pkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">vimPlugins</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">harpoon;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">setup </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;require(&#39;harpoon&#39;).setup {}&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">after </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[</span><span style="color:#183691;">&quot;aerial&quot;</span><span style="color:#323232;">]; </span><span style="font-style:italic;color:#969896;"># place harpoon configuration after aerial
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">}
</span></pre>
<h6 id="setup-using-luaconfigrc">Setup using luaConfigRC</h6>
<p><a href="options.html#option-vim-luaConfigRC" class="option-reference"><code>vim.luaConfigRC</code></a> also uses an attribute set, but this one is resolved as a DAG
directly. The attribute names denote the section names, and the values lua code.
For example:</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># This will create a section called &quot;aquarium&quot; in the &#39;init.lua&#39; with the
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># contents of your custom configuration. By default &#39;entryAnywhere&#39; is implied
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># in DAGs, so this will be inserted to an arbitrary position. In the case you 
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># wish to control the position of this section with more precision, please
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># look into the DAGs section of the manual.
</span><span style="color:#323232;">  </span><span style="color:#795da3;">config</span><span style="color:#323232;">.</span><span style="color:#795da3;">vim</span><span style="color:#323232;">.</span><span style="color:#795da3;">luaConfigRC</span><span style="color:#323232;">.</span><span style="color:#795da3;">aquarium </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;vim.cmd(&#39;colorscheme aquiarum&#39;)&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">}
</span></pre>
<!-- deno-fmt-ignore-start -->
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>One of the <strong>greatest strengths</strong> of <strong>nvf</strong> is the ability to order</p>
</div>
configuration snippets precisely using the [DAG system]. DAGs
are a very powerful mechanism that allows specifying positions
of individual sections of configuration as needed. We provide helper functions
in the extended library, usually under `inputs.nvf.lib.nvim.dag` that you may
use.
Please refer to the [DAG section] in the nvf manual
to find out more about the DAG system.
<h5 id="sec-lazy-method">Lazy Method</h5>
<p>As of version <strong>0.7</strong>, an API is exposed to allow configuring lazy-loaded
plugins via <a href="options.html#option-lz-n" class="option-reference"><code>lz.n</code></a> and <code>lzn-auto-require</code>. Below is a comprehensive example of
how it may be loaded to lazy-load an arbitrary plugin.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="color:#795da3;">config</span><span style="color:#323232;">.</span><span style="color:#795da3;">vim</span><span style="color:#323232;">.</span><span style="color:#795da3;">lazy</span><span style="color:#323232;">.</span><span style="color:#795da3;">plugins </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="color:#183691;">&quot;aerial.nvim&quot; </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">      </span><span style="color:#795da3;">package </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">pkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">vimPlugins</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">aerial-nvim;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">setupModule </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;aerial&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">setupOpts </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">        </span><span style="color:#795da3;">option_name </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">true</span><span style="color:#323232;">;
</span><span style="color:#323232;">      };
</span><span style="color:#323232;">      </span><span style="color:#795da3;">after </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&#39;&#39;
</span><span style="color:#183691;">        -- custom lua code to run after plugin is loaded
</span><span style="color:#183691;">        print(&#39;aerial loaded&#39;)
</span><span style="color:#183691;">      &#39;&#39;</span><span style="color:#323232;">;
</span><span style="color:#323232;">
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># Explicitly mark plugin as lazy. You don&#39;t need this if you define one of
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># the trigger &quot;events&quot; below
</span><span style="color:#323232;">      </span><span style="color:#795da3;">lazy </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">true</span><span style="color:#323232;">;
</span><span style="color:#323232;">
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># load on command
</span><span style="color:#323232;">      </span><span style="color:#795da3;">cmd </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[</span><span style="color:#183691;">&quot;AerialOpen&quot;</span><span style="color:#323232;">];
</span><span style="color:#323232;">
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># load on event
</span><span style="color:#323232;">      </span><span style="color:#795da3;">event </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[</span><span style="color:#183691;">&quot;BufEnter&quot;</span><span style="color:#323232;">];
</span><span style="color:#323232;">
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># load on keymap
</span><span style="color:#323232;">      </span><span style="color:#795da3;">keys </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[
</span><span style="color:#323232;">        {
</span><span style="color:#323232;">          </span><span style="color:#795da3;">key </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;&lt;leader&gt;a&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">          </span><span style="color:#795da3;">action </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;:AerialToggle&lt;CR&gt;&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">        }
</span><span style="color:#323232;">      ];
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">}
</span></pre>
<h6 id="sec-lazyfile-event">LazyFile event</h6>
<p><strong>nvf</strong> re-implements <code>LazyFile</code> as a familiar user event to load a plugin when
a file is opened:</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="color:#795da3;">config</span><span style="color:#323232;">.</span><span style="color:#795da3;">vim</span><span style="color:#323232;">.</span><span style="color:#795da3;">lazy</span><span style="color:#323232;">.</span><span style="color:#795da3;">plugins </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="color:#183691;">&quot;aerial.nvim&quot; </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">      </span><span style="color:#795da3;">package </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">pkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">vimPlugins</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">aerial-nvim;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">event </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[{</span><span style="color:#795da3;">event </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;User&quot;</span><span style="color:#323232;">; </span><span style="color:#795da3;">pattern </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;LazyFile&quot;</span><span style="color:#323232;">;}];
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># ...
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">}
</span></pre>
<p>You can consider the <code>LazyFile</code> event as an alias to the combination of
<code>"BufReadPost"</code>, <code>"BufNewFile"</code> and <code>"BufWritePre"</code>, i.e., a list containing all
three of those events: <code>["BufReadPost" "BufNewFile" "BufWritePre"]</code></p>
<h5 id="sec-non-lazy-method">Non-lazy Method</h5>
<p>As of version <strong>0.5</strong>, we have a more extensive API for configuring plugins that
should be preferred over the legacy method. This API is available as
<a href="#opt-vim.extraPlugins"></a>. Instead of using DAGs exposed by the library
<em>directly</em>, you may use the extra plugin module as follows:</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{pkgs</span><span style="font-weight:bold;color:#a71d5d;">, ...</span><span style="color:#323232;">}: {
</span><span style="color:#323232;">  </span><span style="color:#795da3;">config</span><span style="color:#323232;">.</span><span style="color:#795da3;">vim</span><span style="color:#323232;">.</span><span style="color:#795da3;">extraPlugins </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="color:#795da3;">aerial </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">      </span><span style="color:#795da3;">package </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">pkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">vimPlugins</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">aerial-nvim;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">setup </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&#39;&#39;
</span><span style="color:#183691;">        require(&#39;aerial&#39;).setup {
</span><span style="color:#183691;">          -- some lua configuration here
</span><span style="color:#183691;">        }
</span><span style="color:#183691;">      &#39;&#39;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">
</span><span style="color:#323232;">    </span><span style="color:#795da3;">harpoon </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">      </span><span style="color:#795da3;">package </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">pkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">vimPlugins</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">harpoon;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">setup </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;require(&#39;harpoon&#39;).setup {}&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">after </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[</span><span style="color:#183691;">&quot;aerial&quot;</span><span style="color:#323232;">];
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">}
</span></pre>
<p>This provides a level of abstraction over the DAG system for faster iteration.</p>
<h5 id="sec-legacy-method">Legacy Method</h5>
<p>Prior to version <strong>0.5</strong>, the method of adding new plugins was adding the plugin
package to <a href="#opt-vim.startPlugins"></a> and adding its configuration as a DAG under
one of <a href="options.html#option-vim-configRC" class="option-reference"><code>vim.configRC</code></a> or <a href="#opt-vim.luaConfigRC"></a>. While <code>configRC</code> has been
deprecated, users who have not yet updated to 0.5 or those who prefer a more
hands-on approach may choose to use the old method where the load order of the
plugins is explicitly determined by DAGs without internal abstractions.</p>
<h6 id="sec-adding-new-plugins">Adding New Plugins</h6>
<p>To add a plugin not available in <strong>nvf</strong> as a module to your configuration using
the legacy method, you must add it to <a href="#opt-vim.startPlugins"></a> in order to make
it available to Neovim at runtime.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{pkgs</span><span style="font-weight:bold;color:#a71d5d;">, ...</span><span style="color:#323232;">}: {
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># Add a Neovim plugin from Nixpkgs to the runtime.
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># This does not need to come explicitly from packages. &#39;vim.startPlugins&#39;
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># takes a list of *string* (to load internal plugins) or *package* to load
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># a Neovim package from any source.
</span><span style="color:#323232;">  </span><span style="color:#795da3;">vim</span><span style="color:#323232;">.</span><span style="color:#795da3;">startPlugins </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[pkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">vimPlugins</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">aerial-nvim];
</span><span style="color:#323232;">}
</span></pre>
<p>Once the package is available in Neovim's runtime, you may use the <code>luaConfigRC</code>
option to provide configuration as a DAG using the <strong>nvf</strong> extended library in
order to configure the added plugin,</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{inputs</span><span style="font-weight:bold;color:#a71d5d;">, ...</span><span style="color:#323232;">}: </span><span style="font-weight:bold;color:#a71d5d;">let
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># This assumes you have an input called &#39;nvf&#39; in your flake inputs
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># and &#39;inputs&#39; in your specialArgs. In the case you have passed &#39;nvf&#39;
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># to specialArgs, the &#39;inputs&#39; prefix may be omitted.
</span><span style="color:#323232;">  </span><span style="font-weight:bold;color:#a71d5d;">inherit </span><span style="color:#323232;">(inputs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">nvf</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">nvim</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">dag) </span><span style="color:#795da3;">entryAnywhere</span><span style="color:#323232;">;
</span><span style="font-weight:bold;color:#a71d5d;">in </span><span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># luaConfigRC takes Lua configuration verbatim and inserts it at an arbitrary
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># position by default or if &#39;entryAnywhere&#39; is used.
</span><span style="color:#323232;">  </span><span style="color:#795da3;">vim</span><span style="color:#323232;">.</span><span style="color:#795da3;">luaConfigRC</span><span style="color:#323232;">.</span><span style="color:#795da3;">aerial-nvim</span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">entryAnywhere </span><span style="color:#183691;">&#39;&#39;
</span><span style="color:#183691;">    require(&#39;aerial&#39;).setup {
</span><span style="color:#183691;">      -- your configuration here
</span><span style="color:#183691;">    }
</span><span style="color:#183691;">  &#39;&#39;</span><span style="color:#323232;">;
</span><span style="color:#323232;">}
</span></pre>
<h3 id="ch-overriding-plugins">Overriding plugins</h3>
<p>The <a href="#sec-additional-plugins">additional plugins section</a> details the addition
of new plugins to nvf under regular circumstances, i.e. while making a pull
request to the project. You may <em>override</em> those plugins in your config to
change source versions, e.g., to use newer versions of plugins that are not yet
updated in <strong>nvf</strong>.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">vim</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">pluginOverrides </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">=</span><span style="color:#323232;"> {
</span><span style="color:#323232;">  </span><span style="color:#795da3;">lazydev-nvim </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">pkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">fetchFromGitHub {
</span><span style="color:#323232;">    </span><span style="color:#795da3;">owner </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;folke&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    </span><span style="color:#795da3;">repo </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;lazydev.nvim&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    </span><span style="color:#795da3;">rev </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    </span><span style="color:#795da3;">hash </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">  };
</span><span style="color:#323232;"> </span><span style="font-style:italic;color:#969896;"># It&#39;s also possible to use a flake input
</span><span style="color:#323232;"> </span><span style="color:#795da3;">lazydev-nvim </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">inputs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">lazydev-nvim;
</span><span style="color:#323232;"> </span><span style="font-style:italic;color:#969896;"># Or a local path 
</span><span style="color:#323232;"> </span><span style="color:#795da3;">lazydev-nvim </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">./lazydev</span><span style="color:#323232;">;
</span><span style="color:#323232;"> </span><span style="font-style:italic;color:#969896;"># Or a npins pin... etc
</span><span style="color:#323232;">}</span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">;</span><span style="color:#323232;">
</span></pre>
<p>This will override the source for the <a href="options.html#option-neodev-nvim" class="option-reference"><code>neodev.nvim</code></a> plugin that is used in nvf
with your own plugin.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
</div>
While updating plugin inputs, make sure that any configuration that has been
deprecated in newer versions is changed in the plugin's `setupOpts`. If you
depend on a new version, requesting a version bump in the issues section is a
more reliable option.
<h3 id="ch-languages">Language Support</h3>
<p>Language specific support means there is a combination of language specific
plugins, <code>treesitter</code> support, <code>nvim-lspconfig</code> language servers, and <code>null-ls</code>
integration. This gets you capabilities ranging from autocompletion to
formatting to diagnostics. The following languages have sections under the
<a href="options.html#option-vim-languages" class="option-reference"><code>vim.languages</code></a> attribute.</p>
<ul>
<li>Rust: <a href="#opt-vim.languages.rust.enable">vim.languages.rust.enable</a></li>
<li>Nix: <a href="#opt-vim.languages.nix.enable">vim.languages.nix.enable</a></li>
<li>SQL: <a href="#opt-vim.languages.sql.enable">vim.languages.sql.enable</a></li>
<li>C/C++: <a href="#opt-vim.languages.clang.enable">vim.languages.clang.enable</a></li>
<li>Typescript/Javascript: <a href="#opt-vim.languages.ts.enable">vim.languages.ts.enable</a></li>
<li>Python: <a href="#opt-vim.languages.python.enable">vim.languages.python.enable</a>:</li>
<li>Zig: <a href="#opt-vim.languages.zig.enable">vim.languages.zig.enable</a></li>
<li>Markdown: <a href="#opt-vim.languages.markdown.enable">vim.languages.markdown.enable</a></li>
<li>HTML: <a href="#opt-vim.languages.html.enable">vim.languages.html.enable</a></li>
<li>Dart: <a href="#opt-vim.languages.dart.enable">vim.languages.dart.enable</a></li>
<li>Go: <a href="#opt-vim.languages.go.enable">vim.languages.go.enable</a></li>
<li>Lua: <a href="#opt-vim.languages.lua.enable">vim.languages.lua.enable</a></li>
<li>PHP: <a href="#opt-vim.languages.php.enable">vim.languages.php.enable</a></li>
<li>F#: <a href="#opt-vim.languages.fsharp.enable">vim.languages.fsharp.enable</a></li>
</ul>
<p>Adding support for more languages, and improving support for existing ones are
great places where you can contribute with a PR.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">languages/lsp.md
</span></pre>
<h4 id="sec-languages-custom-lsp-packages">LSP Custom Packages/Command</h4>
<p>One of the strengths of <strong>nvf</strong> is convenient aliases to quickly configure LSP
servers through the Nix module system. By default the LSP packages for relevant
language modules will be pulled into the closure. If this is not desirable, you
may provide <strong>a custom LSP package</strong> (e.g., a Bash script that calls a command)
or <strong>a list of strings</strong> to be interpreted as the command to launch the language
server. By using a list of strings, you can use this to skip automatic
installation of a language server, and instead use the one found in your <code>$PATH</code>
during runtime, for example:</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">vim</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">languages</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">java </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">=</span><span style="color:#323232;"> {
</span><span style="color:#323232;">  </span><span style="color:#795da3;">lsp </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="color:#795da3;">enable </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">true</span><span style="color:#323232;">;
</span><span style="color:#323232;">
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># This expects &#39;jdt-language-server&#39; to be in your PATH or in
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># &#39;vim.extraPackages.&#39; There are no additional checks performed to see
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># if the command provided is valid.
</span><span style="color:#323232;">    </span><span style="color:#795da3;">package </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[</span><span style="color:#183691;">&quot;jdt-language-server&quot; &quot;-data&quot; &quot;~/.cache/jdtls/workspace&quot;</span><span style="color:#323232;">];
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">}
</span></pre>
<h3 id="ch-using-dags">Using DAGs</h3>
<p>We conform to the NixOS options types for the most part, however, a noteworthy
addition for certain options is the
<a href="https://en.wikipedia.org/wiki/Directed_acyclic_graph"><strong>DAG (Directed acyclic graph)</strong></a>
type which is borrowed from home-manager's extended library. This type is most
used for topologically sorting strings. The DAG type allows the attribute set
entries to express dependency relations among themselves. This can, for example,
be used to control the order of configuration sections in your <code>luaConfigRC</code>.</p>
<p>The below section, mostly taken from the
<a href="https://raw.githubusercontent.com/nix-community/home-manager/master/docs/manual/writing-modules/types.md">home-manager manual</a>
explains in more detail the overall usage logic of the DAG type.</p>
<h4 id="sec-types-dag-entryAnywhere">entryAnywhere</h4>
<blockquote>
<p><code>lib.dag.entryAnywhere (value: T) : DagEntry&lt;T&gt;</code></p>
</blockquote>
<p>Indicates that <code>value</code> can be placed anywhere within the DAG. This is also the
default for plain attribute set entries, that is</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">foo</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">bar </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">=</span><span style="color:#323232;"> {
</span><span style="color:#323232;">  </span><span style="color:#795da3;">a </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">dag</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">entryAnywhere </span><span style="color:#0086b3;">0</span><span style="color:#323232;">;
</span><span style="color:#323232;">}
</span></pre>
<p>and</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">foo</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">bar </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">=</span><span style="color:#323232;"> {
</span><span style="color:#323232;">  </span><span style="color:#795da3;">a </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">0</span><span style="color:#323232;">;
</span><span style="color:#323232;">}
</span></pre>
<p>are equivalent.</p>
<h4 id="ch-types-dag-entryAfter">entryAfter</h4>
<blockquote>
<p><code>lib.dag.entryAfter (afters: list string) (value: T) : DagEntry&lt;T&gt;</code></p>
</blockquote>
<p>Indicates that <code>value</code> must be placed <em>after</em> each of the attribute names in the
given list. For example</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">foo</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">bar </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">=</span><span style="color:#323232;"> {
</span><span style="color:#323232;">  </span><span style="color:#795da3;">a </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">0</span><span style="color:#323232;">;
</span><span style="color:#323232;">  </span><span style="color:#795da3;">b </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">dag</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">entryAfter [ </span><span style="color:#183691;">&quot;a&quot; </span><span style="color:#323232;">] </span><span style="color:#0086b3;">1</span><span style="color:#323232;">;
</span><span style="color:#323232;">}
</span></pre>
<p>would place <code>b</code> after <code>a</code> in the graph.</p>
<h4 id="ch-types-dag-entryBefore">entryBefore</h4>
<blockquote>
<p><code>lib.dag.entryBefore (befores: list string) (value: T) : DagEntry&lt;T&gt;</code></p>
</blockquote>
<p>Indicates that <code>value</code> must be placed <em>before</em> each of the attribute names in
the given list. For example</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">foo</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">bar </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">=</span><span style="color:#323232;"> {
</span><span style="color:#323232;">  </span><span style="color:#795da3;">b </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">dag</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">entryBefore [ </span><span style="color:#183691;">&quot;a&quot; </span><span style="color:#323232;">] </span><span style="color:#0086b3;">1</span><span style="color:#323232;">;
</span><span style="color:#323232;">  </span><span style="color:#795da3;">a </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">0</span><span style="color:#323232;">;
</span><span style="color:#323232;">}
</span></pre>
<p>would place <code>b</code> before <code>a</code> in the graph.</p>
<h4 id="sec-types-dag-entryBetween">entryBetween</h4>
<blockquote>
<p><code>lib.dag.entryBetween (befores: list string) (afters: list string) (value: T) : DagEntry&lt;T&gt;</code></p>
</blockquote>
<p>Indicates that <code>value</code> must be placed <em>before</em> the attribute names in the first
list and <em>after</em> the attribute names in the second list. For example</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">foo</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">bar </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">=</span><span style="color:#323232;"> {
</span><span style="color:#323232;">  </span><span style="color:#795da3;">a </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">0</span><span style="color:#323232;">;
</span><span style="color:#323232;">  </span><span style="color:#795da3;">c </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">dag</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">entryBetween [ </span><span style="color:#183691;">&quot;b&quot; </span><span style="color:#323232;">] [ </span><span style="color:#183691;">&quot;a&quot; </span><span style="color:#323232;">] </span><span style="color:#0086b3;">2</span><span style="color:#323232;">;
</span><span style="color:#323232;">  </span><span style="color:#795da3;">b </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">1</span><span style="color:#323232;">;
</span><span style="color:#323232;">}
</span></pre>
<p>would place <code>c</code> before <code>b</code> and after <code>a</code> in the graph.</p>
<p>There are also a set of functions that generate a DAG from a list. These are
convenient when you just want to have a linear list of DAG entries, without
having to manually enter the relationship between each entry. Each of these
functions take a <code>tag</code> as argument and the DAG entries will be named
`${tag}-$<span class="index-markup">.</p>
<h4 id="sec-types-dag-entriesAnywhere">entriesAnywhere</h4>
<blockquote>
<p></span>lib.dag.entriesAnywhere (tag: string) (values: [T]) : Dag<T>`</p>
</blockquote>
<p>Creates a DAG with the given values with each entry labeled using the given tag.
For example</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">foo</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">bar </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">=</span><span style="color:#323232;"> lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">dag</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">entriesAnywhere </span><span style="color:#183691;">&quot;a&quot; </span><span style="color:#323232;">[ </span><span style="color:#0086b3;">0 1 </span><span style="color:#323232;">]</span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">;</span><span style="color:#323232;">
</span></pre>
<p>is equivalent to</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">foo</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">bar </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">=</span><span style="color:#323232;"> {
</span><span style="color:#323232;">  </span><span style="color:#795da3;">a-0 </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">0</span><span style="color:#323232;">;
</span><span style="color:#323232;">  </span><span style="color:#795da3;">a-1 </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">dag</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">entryAfter [ </span><span style="color:#183691;">&quot;a-0&quot; </span><span style="color:#323232;">] </span><span style="color:#0086b3;">1</span><span style="color:#323232;">;
</span><span style="color:#323232;">}
</span></pre>
<h4 id="sec-types-dag-entriesAfter">entriesAfter</h4>
<blockquote>
<p><code>lib.dag.entriesAfter (tag: string) (afters: list string) (values: [T]) : Dag&lt;T&gt;</code></p>
</blockquote>
<p>Creates a DAG with the given values with each entry labeled using the given tag.
The list of values are placed are placed <em>after</em> each of the attribute names in
<code>afters</code>. For example</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">foo</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">bar </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">=</span><span style="color:#323232;">
</span><span style="color:#323232;">  { </span><span style="color:#795da3;">b </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">0</span><span style="color:#323232;">; } </span><span style="font-weight:bold;color:#a71d5d;">// </span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">dag</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">entriesAfter </span><span style="color:#183691;">&quot;a&quot; </span><span style="color:#323232;">[ </span><span style="color:#183691;">&quot;b&quot; </span><span style="color:#323232;">] [ </span><span style="color:#0086b3;">1 2 </span><span style="color:#323232;">]</span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">;</span><span style="color:#323232;">
</span></pre>
<p>is equivalent to</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">foo</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">bar </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">=</span><span style="color:#323232;"> {
</span><span style="color:#323232;">  </span><span style="color:#795da3;">b </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">0</span><span style="color:#323232;">;
</span><span style="color:#323232;">  </span><span style="color:#795da3;">a-0 </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">dag</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">entryAfter [ </span><span style="color:#183691;">&quot;b&quot; </span><span style="color:#323232;">] </span><span style="color:#0086b3;">1</span><span style="color:#323232;">;
</span><span style="color:#323232;">  </span><span style="color:#795da3;">a-1 </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">dag</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">entryAfter [ </span><span style="color:#183691;">&quot;a-0&quot; </span><span style="color:#323232;">] </span><span style="color:#0086b3;">2</span><span style="color:#323232;">;
</span><span style="color:#323232;">}
</span></pre>
<h4 id="sec-types-dag-entriesBefore">entriesBefore</h4>
<blockquote>
<p><code>lib.dag.entriesBefore (tag: string) (befores: list string) (values: [T]) : Dag&lt;T&gt;</code></p>
</blockquote>
<p>Creates a DAG with the given values with each entry labeled using the given tag.
The list of values are placed <em>before</em> each of the attribute names in <code>befores</code>.
For example</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">foo</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">bar </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">=</span><span style="color:#323232;">
</span><span style="color:#323232;">  { </span><span style="color:#795da3;">b </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">0</span><span style="color:#323232;">; } </span><span style="font-weight:bold;color:#a71d5d;">// </span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">dag</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">entriesBefore </span><span style="color:#183691;">&quot;a&quot; </span><span style="color:#323232;">[ </span><span style="color:#183691;">&quot;b&quot; </span><span style="color:#323232;">] [ </span><span style="color:#0086b3;">1 2 </span><span style="color:#323232;">]</span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">;</span><span style="color:#323232;">
</span></pre>
<p>is equivalent to</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">foo</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">bar </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">=</span><span style="color:#323232;"> {
</span><span style="color:#323232;">  </span><span style="color:#795da3;">b </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">0</span><span style="color:#323232;">;
</span><span style="color:#323232;">  </span><span style="color:#795da3;">a-0 </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">1</span><span style="color:#323232;">;
</span><span style="color:#323232;">  </span><span style="color:#795da3;">a-1 </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">dag</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">entryBetween [ </span><span style="color:#183691;">&quot;b&quot; </span><span style="color:#323232;">] [ </span><span style="color:#183691;">&quot;a-0&quot; </span><span style="color:#323232;">] </span><span style="color:#0086b3;">2</span><span style="color:#323232;">;
</span><span style="color:#323232;">}
</span></pre>
<h4 id="sec-types-dag-entriesBetween">entriesBetween</h4>
<blockquote>
<p><code>lib.dag.entriesBetween (tag: string) (befores: list string) (afters: list string) (values: [T]) : Dag&lt;T&gt;</code></p>
</blockquote>
<p>Creates a DAG with the given values with each entry labeled using the given tag.
The list of values are placed <em>before</em> each of the attribute names in <code>befores</code>
and <em>after</em> each of the attribute names in <code>afters</code>. For example</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">foo</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">bar </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">=</span><span style="color:#323232;">
</span><span style="color:#323232;">  { </span><span style="color:#795da3;">b </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">0</span><span style="color:#323232;">; </span><span style="color:#795da3;">c </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">3</span><span style="color:#323232;">; } </span><span style="font-weight:bold;color:#a71d5d;">// </span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">dag</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">entriesBetween </span><span style="color:#183691;">&quot;a&quot; </span><span style="color:#323232;">[ </span><span style="color:#183691;">&quot;b&quot; </span><span style="color:#323232;">] [ </span><span style="color:#183691;">&quot;c&quot; </span><span style="color:#323232;">] [ </span><span style="color:#0086b3;">1 2 </span><span style="color:#323232;">]</span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">;</span><span style="color:#323232;">
</span></pre>
<p>is equivalent to</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">foo</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">bar </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">=</span><span style="color:#323232;"> {
</span><span style="color:#323232;">  </span><span style="color:#795da3;">b </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">0</span><span style="color:#323232;">;
</span><span style="color:#323232;">  </span><span style="color:#795da3;">c </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">3</span><span style="color:#323232;">;
</span><span style="color:#323232;">  </span><span style="color:#795da3;">a-0 </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">dag</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">entryAfter [ </span><span style="color:#183691;">&quot;c&quot; </span><span style="color:#323232;">] </span><span style="color:#0086b3;">1</span><span style="color:#323232;">;
</span><span style="color:#323232;">  </span><span style="color:#795da3;">a-1 </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">dag</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">entryBetween [ </span><span style="color:#183691;">&quot;b&quot; </span><span style="color:#323232;">] [ </span><span style="color:#183691;">&quot;a-0&quot; </span><span style="color:#323232;">] </span><span style="color:#0086b3;">2</span><span style="color:#323232;">;
</span><span style="color:#323232;">}
</span></pre>
<h3 id="ch-dag-entries">DAG entries in nvf</h3>
<p>From the previous chapter, it should be clear that DAGs are useful, because you
can add code that relies on other code. However, if you don't know what the
entries are called, it's hard to do that, so here is a list of the internal
entries in nvf:</p>
<h4 id="ch-vim-luaconfigrc"><a href="options.html#option-vim-luaConfigRC" class="option-reference"><code>vim.luaConfigRC</code></a> (top-level DAG)</h4>
<ol>
<li>(<code>luaConfigPre</code>) - not a part of the actual DAG, instead, it's simply
inserted before the rest of the DAG</li>
<li><code>globalsScript</code> - used to set globals defined in <a href="options.html#option-vim-globals" class="option-reference"><code>vim.globals</code></a></li>
<li><code>basic</code> - used to set basic configuration options</li>
<li><code>optionsScript</code> - used to set options defined in <a href="options.html#option-vim-o" class="option-reference"><code>vim.o</code></a></li>
<li><code>theme</code> (this is simply placed before <code>pluginConfigs</code> and <code>lazyConfigs</code>,
meaning that surrounding entries don't depend on it) - used to set up the
theme, which has to be done before other plugins</li>
<li><code>lazyConfigs</code> - <a href="options.html#option-lz-n" class="option-reference"><code>lz.n</code></a> and <code>lzn-auto-require</code> configs. If <a href="options.html#option-vim-lazy-enable" class="option-reference"><code>vim.lazy.enable</code></a>
is false, this will contain each plugin's config instead.</li>
<li><code>pluginConfigs</code> - the result of the nested <a href="options.html#option-vim-pluginRC" class="option-reference"><code>vim.pluginRC</code></a> (internal option,
see the <a href="/index.xhtml#ch-custom-plugins">Custom Plugins</a> page for adding your
own plugins) DAG, used to set up internal plugins</li>
<li><code>extraPluginConfigs</code> - the result of <a href="options.html#option-vim-extraPlugins" class="option-reference"><code>vim.extraPlugins</code></a>, which is not a
direct DAG, but is converted to, and resolved as one internally</li>
<li><code>mappings</code> - the result of <a href="options.html#option-vim-maps" class="option-reference"><code>vim.maps</code></a></li>
</ol>
<h3 id="ch-autocmds-augroups">Autocommands and Autogroups</h3>
<p>This module allows you to declaratively configure Neovim autocommands and
autogroups within your Nix configuration.</p>
<h4 id="sec-vim-augroups">Autogroups (<a href="options.html#option-vim-augroups" class="option-reference"><code>vim.augroups</code></a>)</h4>
<p>Autogroups (<code>augroup</code>) organize related autocommands. This allows them to be
managed collectively, such as clearing them all at once to prevent duplicates.
Each entry in the list is a submodule with the following options:</p>
<table><thead><tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th><th>Example</th></tr></thead><tbody>
<tr><th><code>enable</code></th><th><code>bool</code></th><th><code>true</code></th><th>Enables or disables this autogroup definition.</th><th><code>true</code></th></tr>
<tr><th><code>name</code></th><th><code>str</code></th><th><em>None</em></th><th><strong>Required.</strong> The unique name for the autogroup.</th><th><code>"MyFormatGroup"</code></th></tr>
<tr><th><code>clear</code></th><th><code>bool</code></th><th><code>true</code></th><th>Clears any existing autocommands within this group before adding new ones defined in <a href="options.html#option-vim-autocmds" class="option-reference"><code>vim.autocmds</code></a>.</th><th><code>true</code></th></tr>
</tbody></table>
<p><strong>Example:</strong></p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="color:#795da3;">vim</span><span style="color:#323232;">.</span><span style="color:#795da3;">augroups </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[
</span><span style="color:#323232;">    {
</span><span style="color:#323232;">      </span><span style="color:#795da3;">name </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;MyCustomAuGroup&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">clear </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">true</span><span style="color:#323232;">; </span><span style="font-style:italic;color:#969896;"># Clear previous autocommands in this group on reload
</span><span style="color:#323232;">    }
</span><span style="color:#323232;">    {
</span><span style="color:#323232;">      </span><span style="color:#795da3;">name </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;Formatting&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># clear defaults to true
</span><span style="color:#323232;">    }
</span><span style="color:#323232;">  ];
</span><span style="color:#323232;">}
</span></pre>
<h4 id="sec-vim-autocmds">Autocommands (<a href="options.html#option-vim-autocmds" class="option-reference"><code>vim.autocmds</code></a>)</h4>
<p>Autocommands (<code>autocmd</code>) trigger actions based on events happening within Neovim
(e.g., saving a file, entering a buffer). Each entry in the list is a submodule
with the following options:</p>
<table><thead><tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th><th>Example</th></tr></thead><tbody>
<tr><th><code>enable</code></th><th><code>bool</code></th><th><code>true</code></th><th>Enables or disables this autocommand definition.</th><th><code>true</code></th></tr>
<tr><th><code>event</code></th><th><code>nullOr (listOf str)</code></th><th><code>null</code></th><th><strong>Required.</strong> List of Neovim events that trigger this autocommand (e.g., <code>BufWritePre</code>, <code>FileType</code>).</th><th><code>[ "BufWritePre" ]</code></th></tr>
<tr><th><code>pattern</code></th><th><code>nullOr (listOf str)</code></th><th><code>null</code></th><th>List of file patterns (globs) to match against (e.g., <code>*.py</code>, <code>*</code>). If <code>null</code>, matches all files for the given event.</th><th><code>[ "*.lua", "*.nix" ]</code></th></tr>
<tr><th><code>callback</code></th><th><code>nullOr luaInline</code></th><th><code>null</code></th><th>A Lua function to execute when the event triggers. Use <a href="options.html#option-lib-nvim-types-luaInline" class="option-reference"><code>lib.nvim.types.luaInline</code></a> or <code>lib.options.literalExpression "mkLuaInline '''...'''"</code>. <strong>Cannot be used with <code>command</code>.</strong></th><th><code>lib.nvim.types.luaInline "function() print('File saved!') end"</code></th></tr>
<tr><th><code>command</code></th><th><code>nullOr str</code></th><th><code>null</code></th><th>A Vimscript command to execute when the event triggers. <strong>Cannot be used with <code>callback</code>.</strong></th><th><code>"echo 'File saved!'"</code></th></tr>
<tr><th><code>group</code></th><th><code>nullOr str</code></th><th><code>null</code></th><th>The name of an <code>augroup</code> (defined in <a href="options.html#option-vim-augroups" class="option-reference"><code>vim.augroups</code></a>) to associate this autocommand with.</th><th><code>"MyCustomAuGroup"</code></th></tr>
<tr><th><code>desc</code></th><th><code>nullOr str</code></th><th><code>null</code></th><th>A description for the autocommand (useful for introspection).</th><th><code>"Format buffer on save"</code></th></tr>
<tr><th><code>once</code></th><th><code>bool</code></th><th><code>false</code></th><th>If <code>true</code>, the autocommand runs only once and then automatically removes itself.</th><th><code>false</code></th></tr>
<tr><th><code>nested</code></th><th><code>bool</code></th><th><code>false</code></th><th>If <code>true</code>, allows this autocommand to trigger other autocommands.</th><th><code>false</code></th></tr>
</tbody></table>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You cannot define both <code>callback</code> (for Lua functions) and <code>command</code> (for
Vimscript) for the same autocommand. Choose one.</p>
</div>
<p><strong>Examples:</strong></p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{ lib</span><span style="font-weight:bold;color:#a71d5d;">, ... </span><span style="color:#323232;">}:
</span><span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="color:#795da3;">vim</span><span style="color:#323232;">.</span><span style="color:#795da3;">augroups </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[ { </span><span style="color:#795da3;">name </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;UserSetup&quot;</span><span style="color:#323232;">; } ];
</span><span style="color:#323232;">
</span><span style="color:#323232;">  </span><span style="color:#795da3;">vim</span><span style="color:#323232;">.</span><span style="color:#795da3;">autocmds </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># Example 1: Using a Lua callback
</span><span style="color:#323232;">    {
</span><span style="color:#323232;">      </span><span style="color:#795da3;">event </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[ </span><span style="color:#183691;">&quot;BufWritePost&quot; </span><span style="color:#323232;">];
</span><span style="color:#323232;">      </span><span style="color:#795da3;">pattern </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[ </span><span style="color:#183691;">&quot;*.lua&quot; </span><span style="color:#323232;">];
</span><span style="color:#323232;">      </span><span style="color:#795da3;">group </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;UserSetup&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">desc </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;Notify after saving Lua file&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">callback </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">nvim</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">types</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">luaInline </span><span style="color:#183691;">&#39;&#39;
</span><span style="color:#183691;">        function()
</span><span style="color:#183691;">          vim.notify(&quot;Lua file saved!&quot;, vim.log.levels.INFO)
</span><span style="color:#183691;">        end
</span><span style="color:#183691;">      &#39;&#39;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    }
</span><span style="color:#323232;">
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># Example 2: Using a Vim command
</span><span style="color:#323232;">    {
</span><span style="color:#323232;">      </span><span style="color:#795da3;">event </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[ </span><span style="color:#183691;">&quot;FileType&quot; </span><span style="color:#323232;">];
</span><span style="color:#323232;">      </span><span style="color:#795da3;">pattern </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[ </span><span style="color:#183691;">&quot;markdown&quot; </span><span style="color:#323232;">];
</span><span style="color:#323232;">      </span><span style="color:#795da3;">group </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;UserSetup&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">desc </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;Set spellcheck for Markdown&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">command </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;setlocal spell&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    }
</span><span style="color:#323232;">
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># Example 3: Autocommand without a specific group
</span><span style="color:#323232;">    {
</span><span style="color:#323232;">      </span><span style="color:#795da3;">event </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[ </span><span style="color:#183691;">&quot;BufEnter&quot; </span><span style="color:#323232;">];
</span><span style="color:#323232;">      </span><span style="color:#795da3;">pattern </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[ </span><span style="color:#183691;">&quot;*.log&quot; </span><span style="color:#323232;">];
</span><span style="color:#323232;">      </span><span style="color:#795da3;">desc </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;Disable line numbers in log files&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">command </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;setlocal nonumber&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># No &#39;group&#39; specified
</span><span style="color:#323232;">    }
</span><span style="color:#323232;">
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># Example 4: Using Lua for callback
</span><span style="color:#323232;">    {
</span><span style="color:#323232;">      </span><span style="color:#795da3;">event </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[ </span><span style="color:#183691;">&quot;BufWinEnter&quot; </span><span style="color:#323232;">];
</span><span style="color:#323232;">      </span><span style="color:#795da3;">pattern </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[ </span><span style="color:#183691;">&quot;*&quot; </span><span style="color:#323232;">];
</span><span style="color:#323232;">      </span><span style="color:#795da3;">desc </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;Simple greeting on entering a buffer window&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">callback </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">lib</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">generators</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">mkLuaInline </span><span style="color:#183691;">&#39;&#39;
</span><span style="color:#183691;">        function(args)
</span><span style="color:#183691;">          print(&quot;Entered buffer: &quot; .. args.buf)
</span><span style="color:#183691;">        end
</span><span style="color:#183691;">      &#39;&#39;</span><span style="color:#323232;">;
</span><span style="color:#323232;">      
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># Run only once per session trigger
</span><span style="color:#323232;">      </span><span style="color:#795da3;">once </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#0086b3;">true</span><span style="color:#323232;">; 
</span><span style="color:#323232;">    }
</span><span style="color:#323232;">  ];
</span><span style="color:#323232;">}
</span></pre>
<p>These definitions are automatically translated into the necessary Lua code to
configure <a href="options.html#option-vim-api-nvim_create_augroup" class="option-reference"><code>vim.api.nvim_create_augroup</code></a> and <a href="options.html#option-vim-api-nvim_create_autocmd" class="option-reference"><code>vim.api.nvim_create_autocmd</code></a> when
Neovim starts.</p>
<h2 id="ch-helpful-tips">Helpful Tips</h2>
<p>This section provides helpful tips that may be considered "unorthodox" or "too
advanced" for some users. We will cover basic debugging steps, offline
documentation, configuring <strong>nvf</strong> with pure Lua and using custom plugin sources
in <strong>nvf</strong> in this section. For general configuration tips, please see previous
chapters.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">tips/debugging-nvf.md
</span><span style="color:#323232;">tips/offline-docs.md
</span><span style="color:#323232;">tips/pure-lua-config.md
</span><span style="color:#323232;">tips/plugin-sources.md
</span></pre>
<h3 id="sec-debugging-nvf">Debugging nvf</h3>
<p>There may be instances where the your Nix configuration evaluates to invalid
Lua, or times when you will be asked to provide your built Lua configuration for
easier debugging by nvf maintainers. nvf provides two helpful utilities out of
the box.</p>
<p><strong>nvf-print-config</strong> and <strong>nvf-print-config-path</strong> will be bundled with nvf as
lightweight utilities to help you view or share your built configuration when
necessary.</p>
<p>To view your configuration with syntax highlighting, you may use the
<a href="https://github.com/sharkdp/bat">bat pager</a>.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">nvf-print-config </span><span style="font-weight:bold;color:#a71d5d;">| </span><span style="color:#323232;">bat --language</span><span style="font-weight:bold;color:#a71d5d;">=</span><span style="color:#323232;">lua
</span></pre>
<p>Alternatively, <code>cat</code> or <code>less</code> may also be used.</p>
<h4 id="sec-accessing-config">Accessing <code>neovimConfig</code></h4>
<p>It is also possible to access the configuration for the wrapped package. The
<em>built</em> Neovim package will contain a <code>neovimConfig</code> attribute in its
<code>passthru</code>.</p>
<h3 id="sec-offline-documentation">Offline Documentation</h3>
<p>The manpages provided by nvf contains an offline version of the option search
normally available at <a href="https://notashelf.github.io/nvf/options.html"><a href="https://notashelf.github.io/nvf/options.html">https://notashelf.github.io/nvf/options.html</a></a>. You may
use the <code>man 5 nvf</code> command to view option documentation from the comfort of
your terminal.</p>
<p>Note that this is only available for NixOS and Home-Manager module
installations.</p>
<h3 id="sec-pure-lua-config">Pure Lua Configuration</h3>
<p>We recognize that you might not always want to configure your setup purely in
Nix, sometimes doing things in Lua is simply the "superior" option. In such a
case you might want to configure your Neovim instance using Lua, and nothing but
Lua. It is also possible to mix Lua and Nix configurations.</p>
<p>Pure Lua or hybrid Lua/Nix configurations can be achieved in two different ways.
<em>Purely</em>, by modifying Neovim's runtime directory or <em>impurely</em> by placing Lua
configuration in a directory found in <code>$HOME</code>. For your convenience, this
section will document both methods as they can be used.</p>
<h4 id="sec-pure-nvf-runtime">Pure Runtime Directory</h4>
<p>As of 0.6, nvf allows you to modify Neovim's runtime path to suit your needs.
One of the ways the new runtime option is to add a configuration <strong>located
relative to your <a href="options.html#option-flake-nix" class="option-reference"><code>flake.nix</code></a></strong>, which must be version controlled in pure flakes
manner.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># Let us assume we are in the repository root, i.e., the same directory as the
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># flake.nix. For the sake of the argument, we will assume that the Neovim lua
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># configuration is in a nvim/ directory relative to flake.nix.
</span><span style="color:#323232;">  </span><span style="color:#795da3;">vim </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="color:#795da3;">additionalRuntimeDirectories </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># This will be added to Neovim&#39;s runtime paths. Conceptually, this behaves
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># very similarly to ~/.config/nvim but you may not place a top-level
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># init.lua to be able to require it directly.
</span><span style="color:#323232;">      </span><span style="color:#183691;">./nvim
</span><span style="color:#323232;">    ];
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">}
</span></pre>
<p>This will add the <code>nvim</code> directory, or rather, the <em>store path</em> that will be
realised after your flake gets copied to the Nix store, to Neovim's runtime
directory. You may now create a <code>lua/myconfig</code> directory within this nvim
directory, and call it with <a href="#opt-vim.luaConfigRC"></a>.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{pkgs</span><span style="font-weight:bold;color:#a71d5d;">, ...</span><span style="color:#323232;">}: {
</span><span style="color:#323232;">  </span><span style="color:#795da3;">vim </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="color:#795da3;">additionalRuntimeDirectories </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># You can list more than one file here.
</span><span style="color:#323232;">      </span><span style="color:#183691;">./nvim-custom-1
</span><span style="color:#323232;">
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># To make sure list items are ordered, use lib.mkBefore or lib.mkAfter
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># Simply placing list items in a given order will **not** ensure that
</span><span style="color:#323232;">      </span><span style="font-style:italic;color:#969896;"># this list  will be deterministic.
</span><span style="color:#323232;">      </span><span style="color:#183691;">./nvim-custom-2
</span><span style="color:#323232;">    ];
</span><span style="color:#323232;">
</span><span style="color:#323232;">    </span><span style="color:#795da3;">startPlugins </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[pkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">vimPlugins</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">gitsigns];
</span><span style="color:#323232;">
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># Neovim supports in-line syntax highlighting for multi-line strings.
</span><span style="color:#323232;">    </span><span style="font-style:italic;color:#969896;"># Simply place the filetype in a /* comment */ before the line.
</span><span style="color:#323232;">    </span><span style="color:#795da3;">luaConfigRC</span><span style="color:#323232;">.</span><span style="color:#795da3;">myconfig </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="font-style:italic;color:#969896;">/* lua */ </span><span style="color:#183691;">&#39;&#39;
</span><span style="color:#183691;">      -- Call the Lua module from ./nvim/lua/myconfig
</span><span style="color:#183691;">      require(&quot;myconfig&quot;)
</span><span style="color:#183691;">
</span><span style="color:#183691;">      -- Any additional Lua configuration that you might want *after* your own
</span><span style="color:#183691;">      -- configuration. For example, a plugin setup call.
</span><span style="color:#183691;">      require(&#39;gitsigns&#39;).setup({})
</span><span style="color:#183691;">    &#39;&#39;</span><span style="color:#323232;">;
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">}
</span></pre>
<h4 id="sec-impure-absolute-dir">Impure Absolute Directory</h4>
<p>As of <a href="https://github.com/neovim/neovim/pull/22128">Neovim 0.9</a>, <code class="nix-var">$NVIM_APPNAME</code> is a variable expected by Neovim to
decide on the configuration directory. nvf sets this variable as <code>"nvf"</code>,
meaning <code>~/.config/nvf</code> will be regarded as <em>the</em> configuration directory by
Neovim, similar to how <code>~/.config/nvim</code> behaves in regular installations. This
allows some degree of Lua configuration, backed by our low-level wrapper
<a href="https://github.com/Gerg-L/mnw">mnw</a>. Creating a <code>lua/</code> directory located in
<code>$NVIM_APPNAME</code> ("nvf" by default) and placing your configuration in, e.g.,
<code>~/.config/nvf/lua/myconfig</code> will allow you to <code>require</code> it as a part of the Lua
module system through nvf's module system.</p>
<p>Let's assume your <code>~/.config/nvf/lua/myconfig/init.lua</code> consists of the
following:</p>
<pre style="background-color:#ffffff;">
<span style="font-style:italic;color:#969896;">-- init.lua
</span><span style="color:#323232;">vim.keymap.set(</span><span style="color:#183691;">&quot;n&quot;</span><span style="color:#323232;">, </span><span style="color:#183691;">&quot; &quot;</span><span style="color:#323232;">, </span><span style="color:#183691;">&quot;&lt;Nop&gt;&quot;</span><span style="color:#323232;">, { </span><span style="color:#183691;">silent </span><span style="color:#323232;">= </span><span style="color:#0086b3;">true</span><span style="color:#323232;">, </span><span style="color:#183691;">remap </span><span style="color:#323232;">= </span><span style="color:#0086b3;">false </span><span style="color:#323232;">})
</span><span style="color:#323232;">vim.g.mapleader </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot; &quot;
</span></pre>
<p>The following Nix configuration via <a href="#opt-vim.luaConfigRC"></a> will allow loading
this</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># The attribute name &quot;myconfig-dir&quot; here is arbitrary. It is required to be
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># a *named* attribute by the DAG system, but the name is entirely up to you.
</span><span style="color:#323232;">  </span><span style="color:#795da3;">vim</span><span style="color:#323232;">.</span><span style="color:#795da3;">luaConfigRC</span><span style="color:#323232;">.</span><span style="color:#795da3;">myconfig-dir </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&#39;&#39;
</span><span style="color:#183691;">    require(&quot;myconfig&quot;)
</span><span style="color:#183691;">
</span><span style="color:#183691;">    -- Any additional Lua
</span><span style="color:#183691;">  &#39;&#39;</span><span style="color:#323232;">;
</span><span style="color:#323232;">}
</span></pre>
<p>After you load your custom configuration, you may use an <a href="options.html#option-init-lua" class="option-reference"><code>init.lua</code></a> located in
your custom configuration directory to configure Neovim exactly as you would
without a wrapper like nvf. If you want to place your <code>require</code> call in a
specific position (i.e., before or after options you set in nvf) the
<a href="#ch-using-dags">DAG system</a> will let you place your configuration in a location of your
choosing.</p>
<h3 id="sec-plugin-sources">Adding Plugins From Different Sources</h3>
<p><strong>nvf</strong> attempts to avoid depending on Nixpkgs for Neovim plugins. For the most
part, this is accomplished by defining each plugin's source and building them
from source.</p>
<p>To define plugin sources, we use <a href="https://github.com/andir/npins">npins</a> and pin each plugin source using
builtin fetchers. You are not bound by this restriction. In your own
configuration, any kind of fetcher or plugin source is fine.</p>
<h4 id="ch-plugins-from-nixpkgs">Nixpkgs &amp; Friends</h4>
<p><a href="options.html#option-vim-startPlugins" class="option-reference"><code>vim.startPlugins</code></a> and <a href="options.html#option-vim-optPlugins" class="option-reference"><code>vim.optPlugins</code></a> options take either a <strong>string</strong>, in
which case a plugin from nvf's internal plugins registry will be used, or a
<strong>package</strong>. If your plugin does not require any setup, or ordering for it s
configuration, then it is possible to add it to <a href="options.html#option-vim-startPlugins" class="option-reference"><code>vim.startPlugins</code></a> to load it on
startup.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{pkgs</span><span style="font-weight:bold;color:#a71d5d;">, ...</span><span style="color:#323232;">}: {
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># Aerial does require some setup. In the case you pass a plugin that *does*
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># require manual setup, then you must also call the setup function.
</span><span style="color:#323232;">  </span><span style="color:#795da3;">vim</span><span style="color:#323232;">.</span><span style="color:#795da3;">startPlugins </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[pkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">vimPlugins</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">aerial-nvim];
</span><span style="color:#323232;">}
</span></pre>
<p>This will fetch aerial.nvim from nixpkgs, and add it to Neovim's runtime path to
be loaded manually. Although for plugins that require manual setup, you are
encouraged to use <a href="https://notashelf.github.io/nvf/options.html#opt-vim.extraPlugins"><a href="options.html#option-vim-extraPlugins" class="option-reference"><code>vim.extraPlugins</code></a></a>.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="color:#795da3;">vim</span><span style="color:#323232;">.</span><span style="color:#795da3;">extraPlugins </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="color:#795da3;">aerial </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">      </span><span style="color:#795da3;">package </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">pkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">vimPlugins</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">aerial-nvim;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">setup </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;require(&#39;aerial&#39;).setup {}&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">}
</span></pre>
<p>More details on the extraPlugins API is documented in the
<a href="https://notashelf.github.io/nvf/index.xhtml#ch-custom-plugins">custom plugins section</a>.</p>
<h4 id="ch-plugins-from-source">Building Your Own Plugins</h4>
<p>In the case a plugin is not available in Nixpkgs, or the Nixpkgs package is
outdated (or, more likely, broken) it is possible to build the plugins from
source using a tool, such as <a href="https://github.com/andir/npins">npins</a>. You may also use your <em>flake inputs</em> as
sources.</p>
<p>Example using plugin inputs:</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># In your flake.nix
</span><span style="color:#323232;">  </span><span style="color:#795da3;">inputs </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="color:#795da3;">aerial-nvim </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">      </span><span style="color:#795da3;">url </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;github:stevearc/aerial.nvim&quot;
</span><span style="color:#323232;">      flake </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">=</span><span style="color:#323232;"> </span><span style="color:#0086b3;">false</span><span style="color:#323232;">;
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># Make sure that &#39;inputs&#39; is properly propagated into Nvf, for example, through
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># specialArgs.
</span><span style="color:#323232;">  </span><span style="color:#795da3;">outputs </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{ ... };
</span><span style="color:#323232;">}
</span></pre>
<p>In the case, you may use the input directly for the plugin's source attribute in
<code>buildVimPlugin</code>.</p>
<pre style="background-color:#ffffff;">
<span style="font-style:italic;color:#969896;"># Make sure that &#39;inputs&#39; is properly propagated! It will be missing otherwise
</span><span style="font-style:italic;color:#969896;"># and the resulting errors might be too obscure.
</span><span style="color:#323232;">{inputs</span><span style="font-weight:bold;color:#a71d5d;">, ...</span><span style="color:#323232;">}: </span><span style="font-weight:bold;color:#a71d5d;">let
</span><span style="color:#323232;">  </span><span style="color:#795da3;">aerial-from-source </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">pkgs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">vimUtils</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">buildVimPlugin {
</span><span style="color:#323232;">      </span><span style="color:#795da3;">name </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;aerial-nvim&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">src </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">inputs</span><span style="font-weight:bold;color:#a71d5d;">.</span><span style="color:#323232;">aerial-nvim;
</span><span style="color:#323232;">    };
</span><span style="font-weight:bold;color:#a71d5d;">in </span><span style="color:#323232;">{
</span><span style="color:#323232;">  </span><span style="color:#795da3;">vim</span><span style="color:#323232;">.</span><span style="color:#795da3;">extraPlugins </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">    </span><span style="color:#795da3;">aerial </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">{
</span><span style="color:#323232;">      </span><span style="color:#795da3;">package </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">aerial-from-source;
</span><span style="color:#323232;">      </span><span style="color:#795da3;">setup </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;require(&#39;aerial&#39;).setup {}&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    };
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">}
</span></pre>
<p>Alternatively, if you do not want to keep track of the source using flake inputs
or npins, you may call <code>fetchFromGitHub</code> (or other fetchers) directly. An
example would look like this.</p>
<pre style="background-color:#ffffff;">
<span style="color:#323232;">regexplainer </span><span style="background-color:#f5f5f5;font-weight:bold;color:#b52a1d;">=</span><span style="color:#323232;"> buildVimPlugin {
</span><span style="color:#323232;">  </span><span style="color:#795da3;">name </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;nvim-regexplainer&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">  </span><span style="color:#795da3;">src </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">fetchFromGitHub {
</span><span style="color:#323232;">    </span><span style="color:#795da3;">owner </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;bennypowers&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    </span><span style="color:#795da3;">repo </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;nvim-regexplainer&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    </span><span style="color:#795da3;">rev </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;4250c8f3c1307876384e70eeedde5149249e154f&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">    </span><span style="color:#795da3;">hash </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#183691;">&quot;sha256-15DLbKtOgUPq4DcF71jFYu31faDn52k3P1x47GL3+b0=&quot;</span><span style="color:#323232;">;
</span><span style="color:#323232;">  };
</span><span style="color:#323232;">
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># The &#39;buildVimPlugin&#39; imposes some &quot;require checks&quot; on all plugins build from
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># source. Failing tests, if they are not relevant, can be disabled using the
</span><span style="color:#323232;">  </span><span style="font-style:italic;color:#969896;"># &#39;nvimSkipModule&#39; argument to the &#39;buildVimPlugin&#39; function.
</span><span style="color:#323232;">  </span><span style="color:#795da3;">nvimSkipModule </span><span style="font-weight:bold;color:#a71d5d;">= </span><span style="color:#323232;">[
</span><span style="color:#323232;">    </span><span style="color:#183691;">&quot;regexplainer&quot;
</span><span style="color:#323232;">    </span><span style="color:#183691;">&quot;regexplainer.buffers.init&quot;
</span><span style="color:#323232;">    </span><span style="color:#183691;">&quot;regexplainer.buffers.popup&quot;
</span><span style="color:#323232;">    </span><span style="color:#183691;">&quot;regexplainer.buffers.register&quot;
</span><span style="color:#323232;">    </span><span style="color:#183691;">&quot;regexplainer.buffers.shared&quot;
</span><span style="color:#323232;">    </span><span style="color:#183691;">&quot;regexplainer.buffers.split&quot;
</span><span style="color:#323232;">    </span><span style="color:#183691;">&quot;regexplainer.component.descriptions&quot;
</span><span style="color:#323232;">    </span><span style="color:#183691;">&quot;regexplainer.component.init&quot;
</span><span style="color:#323232;">    </span><span style="color:#183691;">&quot;regexplainer.renderers.narrative.init&quot;
</span><span style="color:#323232;">    </span><span style="color:#183691;">&quot;regexplainer.renderers.narrative.narrative&quot;
</span><span style="color:#323232;">    </span><span style="color:#183691;">&quot;regexplainer.renderers.init&quot;
</span><span style="color:#323232;">    </span><span style="color:#183691;">&quot;regexplainer.utils.defer&quot;
</span><span style="color:#323232;">    </span><span style="color:#183691;">&quot;regexplainer.utils.init&quot;
</span><span style="color:#323232;">    </span><span style="color:#183691;">&quot;regexplainer.utils.treesitter&quot;
</span><span style="color:#323232;">  ];
</span><span style="color:#323232;">}
</span></pre>

          <div class="footnotes-container">
            <!-- Footnotes will be appended here -->
          </div>
        </main>
      </div>

      <footer>
        <p></p>
      </footer>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Sidebar Toggle functionality
        const toggle = document.querySelector(".sidebar-toggle");

        if (toggle) {
          toggle.addEventListener("click", function () {
            document.body.classList.toggle("sidebar-collapsed");

            // Save state to localStorage
            const isCollapsed = document.body.classList.contains("sidebar-collapsed");
            localStorage.setItem("sidebar-collapsed", isCollapsed);
          });
        }

        // Make headings clickable for anchor links
        const content = document.querySelector(".content");
        const headings = content.querySelectorAll("h1, h2, h3, h4, h5, h6");

        headings.forEach(function (heading) {
          // Make sure all headings have IDs
          if (!heading.id) {
            heading.id = heading.textContent
              .toLowerCase()
              .replace(/[^\w\s-]/g, "")
              .replace(/[\s-]+/g, "-")
              .trim();

            if (!heading.id) {
              heading.id =
                "section-" + Math.random().toString(36).substring(2, 9);
            }
          }

          // Make the entire heading clickable
          heading.addEventListener("click", function (e) {
            const id = this.id;
            history.pushState(null, null, "#" + id);

            // Scroll with offset
            const offset =
              this.getBoundingClientRect().top + window.scrollY - 80;
            window.scrollTo({
              top: offset,
              behavior: "smooth",
            });
          });
        });

        // Process footnotes
        const footnoteContainer = document.querySelector(
          ".footnotes-container",
        );

        // Find all footnote references and create a footnotes section
        const footnoteRefs = content.querySelectorAll('a[href^="#fn"]');
        if (footnoteRefs.length > 0) {
          const footnotesDiv = document.createElement("div");
          footnotesDiv.className = "footnotes";

          const footnotesHeading = document.createElement("h2");
          footnotesHeading.textContent = "Footnotes";
          footnotesDiv.appendChild(footnotesHeading);

          const footnotesList = document.createElement("ol");
          footnoteContainer.appendChild(footnotesDiv);
          footnotesDiv.appendChild(footnotesList);

          // Add footnotes
          document.querySelectorAll(".footnote").forEach((footnote) => {
            const id = footnote.id;
            const content = footnote.innerHTML;

            const li = document.createElement("li");
            li.id = id;
            li.innerHTML = content;

            // Add backlink
            const backlink = document.createElement("a");
            backlink.href = "#fnref:" + id.replace("fn:", "");
            backlink.className = "footnote-backlink";
            backlink.textContent = "↩";
            li.appendChild(backlink);

            footnotesList.appendChild(li);
          });
        }

        // Handle initial hash navigation
        function scrollToElement(element) {
          if (element) {
            const offset =
              element.getBoundingClientRect().top + window.scrollY - 80;
            window.scrollTo({
              top: offset,
              behavior: "smooth",
            });
          }
        }

        if (window.location.hash) {
          const targetElement = document.querySelector(window.location.hash);
          if (targetElement) {
            setTimeout(() => scrollToElement(targetElement), 0);
          }
        }
      });
    </script>
    <script src="assets/search.js"></script>

  </body>
</html>
